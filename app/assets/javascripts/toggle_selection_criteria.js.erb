/*
 * This script  handles showing and hiding selection criteria
 */
  var CRITERIA_DIV_SELECTOR = "#criteria";
  var CRITERIA_BUTTON_SELECTOR = "#showHideCriteria";
  var NOT_VISISBLE_RECORDS_EMPTY_DIV_SELECTOR = "div#data-empty";
  var   criteriaHiddenText = "Show Criteria"; //< % =I18n.t($FA +'show_something', :something=>I18n.t($SC))%>";
  var   criteriaVisibleText = "Hide Criteria"; //< % =I18n.t($FA +'hide_something', :something=>I18n.t($SC))%>";
  $(document).ready(function(){
  //$( window ).load(function() {  
    if( $(NOT_VISISBLE_RECORDS_EMPTY_DIV_SELECTOR).html() =="true"){
       $(CRITERIA_BUTTON_SELECTOR).html(criteriaVisibleText);
       $(CRITERIA_DIV_SELECTOR).slideDown('slow');
     }else{
        $(CRITERIA_BUTTON_SELECTOR).html(criteriaHiddenText);
        $(CRITERIA_DIV_SELECTOR).slideUp('slow');
     }
    $(CRITERIA_BUTTON_SELECTOR).click(function(){
      toggleCriteria();
    }); //end click
  });//end ready
  function toggleCriteria(){
    console.log("toggling");
    //Here the text is changed first, assuming the toggle will work in the next commando
    //Otherwise time errors occur!! In a slow toggle the text is not vis or hidden until the slide finishes
    if($(CRITERIA_DIV_SELECTOR).is(':visible')){ 
        $(CRITERIA_BUTTON_SELECTOR).html(criteriaHiddenText);
    }else{
        $(CRITERIA_BUTTON_SELECTOR).html(criteriaVisibleText);
    }
    // toggle has to be after setting button text otherwise is(':visible') will not work properly
    $(CRITERIA_DIV_SELECTOR).slideToggle('slow');  
    
  }